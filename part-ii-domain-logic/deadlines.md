# Deadlines

This feature is introduced in 3.3 version of Axon. Until deadlines, it was possible to schedule an event in a Saga. If you wish more control when a deadline is met, this is the feature to be used. 

Deadlines are possible to be scheduled from Sagas and Aggregates. `DeadlineManager` component is responsible for scheduling deadlines and invoking `@DeadlineHandler`s when the deadline is met. `DeadlineManager` can be injected as a resource. It has two flavors: `SimpleDeadlineManager` and `QuartzDeadlineManager`, like [Event Scheduling](sagas.md#keeping-track-of-deadlines) mechanism for Sagas. 

## Scheduling a Deadline

A deadline can be scheduled only by providing a `Duration` after which it will be triggered (or `Instance` at which it will be triggered) and a name.

```java
String deadlineId = deadlineManager.schedule(Duration.ofMillis(500), "myDeadline");
```

As a result we receive a `deadlineId` which can be used to cancel the deadline:

```java
deadlineManager.cancelSchedule("myDeadline", deadlineId);
```

> **Note**
> It is possible to cancel all deadlines of a given name by invoking `deadlineManager.cancelAll("myDeadline")`.

If you need some contextual data about the Deadline during the Deadline Handling, you can attach a Deadline Payload when scheduling a Deadline:

```java
String deadlineId = deadlineManager.schedule(Duration.ofMillis(500), "myDeadline", new MyDeadlinePayload(...));
```

The Deadline Identifier can be provided to the `DeadlineManager` instead of being generated by it.

## Handling a Deadline

We saw how to schedule a Deadline. When the scheduled time is met, the corresponding `@DeadlineHandler` is invoked. 

> **Important** The `@DeadlineHandler` must be in the same Aggregate/Saga from which the Deadline is scheduled.

The `@DeadlineHandler` is matched by the Deadline Name and the Deadline Payload. 

```java
@DeadlineHandler(deadlineName = "myDeadline")
public void on(MyDeadlinePayload deadlinePayload) {
    // handle the Deadline
}
```

If the Deadline Name is not defined in the `@DeadlineHandler`, matching will be done only by the Deadline Payload. 

```java
@DeadlineHandler
public void on(MyDeadlinePayload deadlinePayload) {
    // handle the Deadline
}
```

If we scheduled a Deadline without any specific payload, the `@DeadlineHandler` does not have to specify the payload neither. 

```java
@DeadlineHandler(deadlineName = "payloadlessDeadline")
public void on() {
    // handle the Deadline
}
```